

<% if mobile_device? %> <!-- Mobile -->
    
    <!-- Map Call -->
    <!-- ***** Still need to hide map controls *** -->
    <%= gmaps("map_options" => {  "detect_location" => true, 
                              "center_on_user" => true, 
                              "auto_zoom" => false,
                              "zoom" => 13},
                              "markers" => { "data" => @json }) %>

    <% content_for :scripts do %>
        <script type="text/javascript" charset="utf-8">
            
            function centerCall(){
                var lat = Gmaps.map.map.getCenter().lat();
                var lng = Gmaps.map.map.getCenter().lng();
                $('#add_lat').html(lat);
                $('#add_long').html(lng);
            };

            Gmaps.map.callback = function() {
                google.maps.event.addListener(Gmaps.map.serviceObject, 'center_changed', function() {
                    centerCall();
                    });
                
            };
                    
        </script>
    <% end %>
    
    <!-- Menu for Mobile Devices -->

    <div class="menu_mobile">

        <!-- Action Call -->
        <div id="menu_action" class="mobmen">
            <button class="toggle btn btn-block btn-info" id="butt_act" type="button">Action</button>
        </div>

        <!-- Main Menu -->                     <!-- **My Location link needs to point to correct path -->
        <div id="menu_main" class="mobmen btn-group btn-group-vertical">        
            <button class="toggle btn btn-block" id="butt_add" type="button">Add Location</button>
            <button class="toggle btn btn-block" id="butt_search" type="button">Search</button>
            <%= link_to "My Locations", root_path, class: "btn btn-block" %>
            <button class="toggle btn btn-block" id="butt_clear" type="button">Clear</button>
        </div>

        <!-- Add Location -->
        <div id="menu_add" class="mobmen">
            Latitude:<span id="add_lat"></span> <br />
            Longitude:<span id="add_long"></span> <br />
            <div>
                <%= link_to 'Add Location', new_point_path, class: "btn btn-info btn-block" %>
                <button class="toggle btn btn-block" id="butt_clear2" type="button">Clear</button>
            </div>
        </div>

        <!-- Search -->
        <div id="menu_search" class="mobmen">
            <%= render 'searchform' %>
            <button class="toggle btn btn-block" type="button">Clear</button>
        </div>

    </div>



<% else %>  <!-- Desktop -->
 
    <div class="page-header">   
        <h1>All points</h1>  
    </div>

    <div class="row-fluid">
        <div class="span8">
            <%= gmaps("map_options" => { :raw => "{styles: deskStyle}", 
                                        "center_latitude" => 43.5,
                                        "center_longitude" => -80,
                                        "detect_location" => false, 
                                        "center_on_user" => false, 
                                        "auto_adjust" => false,
                                        "zoom" => 7},
                                        "markers" => { "data" => @json }) %>  <!-- style options are in points.js --> 

        </div>

        <div class="span4">
            <h3>Search</h3>
            <%= render 'searchform' %>
             
             <h3>Actions</h3>
             Add Location [BUTTON] <br />
             My Points [BUTTON] <br />

             <br />
             

        
             <div id="dataDisplay">
                <h3>Data</h3>
                - Shown on click -
                i = <span id="iLabel"> </span>


            </div>
            
        </div>
    </div>
    <br />
    <%= link_to 'New Point', new_point_path, class: "btn btn-success" %>
    <br /><br />
    <%= link_to 'List of Points for Debug', list_path, class: "btn btn-info" %>

<% end %>





